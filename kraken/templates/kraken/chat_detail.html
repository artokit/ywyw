{% extends 'base.html' %}
{% block title %}Сообщения{% endblock %}

{% block content %}
<div class="messenger empty">
    <div class="container">
        <div class="messenger_wrap">
            <input type="checkbox" id="back" name="back">
            {% include 'inc/chat_rooms.html' %}
            <div class="messenger_right">
                <div class="messenger_right_wrap">
                    <div class=" messenger_right_container mes_add">
                        <label for="back" class="messenger_back">
                            <svg width="9" height="14" viewBox="0 0 9 14" fill="none" xmlns="http://www.w3.org/2000/svg">
                                <path d="M7.53207 13.4437C7.7139 13.4479 7.89246 13.3927 8.04292 13.2857C8.19338 13.1786 8.30827 13.0251 8.37161 12.8465C8.43496 12.6679 8.44361 12.4731 8.39636 12.2891C8.34912 12.1051 8.24833 11.9412 8.108 11.8199L2.75375 7.01461L8.108 2.21097C8.20507 2.13623 8.28637 2.04134 8.3468 1.93216C8.40722 1.82298 8.44548 1.70187 8.45917 1.57649C8.47287 1.4511 8.4617 1.32413 8.42637 1.20347C8.39104 1.08281 8.33232 0.971062 8.25387 0.875283C8.17542 0.779505 8.07894 0.701812 7.97047 0.646906C7.862 0.592 7.74387 0.561161 7.6235 0.556295C7.50312 0.551429 7.38308 0.572583 7.27089 0.61857C7.1587 0.664557 7.05679 0.734314 6.97153 0.823475L0.8414 6.31817C0.745134 6.40423 0.667832 6.51105 0.614825 6.63145C0.561818 6.75184 0.534369 6.88288 0.534369 7.01546C0.534369 7.14804 0.561818 7.27908 0.614825 7.39947C0.667832 7.51986 0.745134 7.62679 0.8414 7.71285L6.97153 13.2128C7.12638 13.3569 7.32501 13.4389 7.53207 13.444L7.53207 13.4437Z" fill="black"></path>
                            </svg>
                        </label>
                        <div class="messenger_right_top">
                            <img src="{{ current_shop.photo.url }}" alt="user">
                            <div class="messenger_right_info messenger_right_info_3">
                                <p class="messenger_right_title"></p>
                                <p class="messenger_right_text">
                                    <span class="regular_nick_name">{{ request.user.first_name }}, </span>
                                    <span class="regular_nick_name">Администратор, </span>
                                    <span class="regular_nick_name">{{ ticket.shop.name }}, </span>
                                    <span class="regular_nick_name">Сотрудники {{ current_ticket.shop.name }}, </span>
                                    <span class="regular_nick_name">Управляющий</span>
                                </p>
                            </div>

                            <div class="messenger_top_setting">
                                <label for="agree-leave" class="messenger_top_item">
                                    <svg width="24" height="24" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
                                        <g clip-path="url(#clip0_2138_67296)">
                                            <path d="M13.375 20.25H9.70833C9.45533 20.25 9.25 20.0447 9.25 19.7917C9.25 19.5387 9.45533 19.3334 9.70833 19.3334H13.375C14.1331 19.3334 14.75 18.7164 14.75 17.9584V13.375C14.75 13.122 14.9553 12.9167 15.2083 12.9167C15.4613 12.9167 15.6667 13.122 15.6667 13.375V17.9584C15.6667 19.2215 14.6391 20.25 13.375 20.25Z" fill="black" stroke="black" stroke-width="0.3"></path>
                                            <path d="M22.543 11.0834H13.3763C13.1233 11.0834 12.918 10.878 12.918 10.625C12.918 10.372 13.1233 10.1667 13.3763 10.1667H22.543C22.796 10.1667 23.0013 10.372 23.0013 10.625C23.0013 10.878 22.796 11.0834 22.543 11.0834Z" fill="black" stroke="black" stroke-width="0.3"></path>
                                            <path d="M8.33333 23C8.13167 23 7.93458 22.9661 7.7485 22.9001L2.25767 21.0695C1.506 20.8193 1 20.1208 1 19.3333V2.83333C1 1.82225 1.82225 1 2.83333 1C3.03683 1 3.23483 1.03392 3.41908 1.10083L8.909 2.9305C9.66067 3.17983 10.1667 3.87833 10.1667 4.66667V21.1667C10.1667 22.1777 9.34442 23 8.33333 23ZM2.83333 1.91667C2.32733 1.91667 1.91667 2.32825 1.91667 2.83333V19.3333C1.91667 19.7257 2.16967 20.074 2.54733 20.2005L8.04733 22.0338C8.64867 22.2474 9.25 21.7662 9.25 21.1667V4.66667C9.25 4.27342 8.997 3.92508 8.61933 3.80042L3.11933 1.96708C3.02492 1.93317 2.92867 1.91667 2.83333 1.91667Z" fill="black" stroke="black" stroke-width="0.3"></path>
                                            <path d="M15.2083 8.33333C14.9553 8.33333 14.75 8.128 14.75 7.875V3.29167C14.75 2.53358 14.1331 1.91667 13.375 1.91667H2.83333C2.58033 1.91667 2.375 1.71133 2.375 1.45833C2.375 1.20533 2.58033 1 2.83333 1H13.375C14.6391 1 15.6667 2.0285 15.6667 3.29167V7.875C15.6667 8.128 15.4613 8.33333 15.2083 8.33333Z" fill="black" stroke="black" stroke-width="0.3"></path>
                                            <path d="M18.8765 14.75C18.7592 14.75 18.6419 14.7051 18.552 14.6162C18.3733 14.4374 18.3733 14.1468 18.552 13.9681L21.8942 10.6259L18.552 7.28373C18.3733 7.10498 18.3733 6.8144 18.552 6.63565C18.7308 6.4569 19.0214 6.4569 19.2001 6.63565L22.8668 10.3023C23.0455 10.4811 23.0455 10.7716 22.8668 10.9504L19.2001 14.6171C19.1112 14.7051 18.9939 14.75 18.8765 14.75Z" fill="black" stroke="black" stroke-width="0.3"></path>
                                        </g>
                                        <defs>
                                            <clipPath id="clip0_2138_67296">
                                                <rect width="24" height="24" fill="white"></rect>
                                            </clipPath>
                                        </defs>
                                    </svg>
                                </label>
                            </div>

                        </div>
                    </div>
                    <div class="messenger_output chat_messages" data="06f908af-6017-4a3d-b1e2-65955bcc5801">
                        {% for message in user_messages %}
                        <div class="messenger_output_item">
                            <img src="{{ user_data.image.url }}" alt="user">
                            <div class="messenger_output_info">
                                <p class="messenger_output_data">{{ message.data|date:"m-d-Y H:i" }}</p>
                                <p class="messenger_output_title">{{ request.user.first_name }}</p>
                                <div class="messenger_output_text">
                                    {{ message.text|linebreaks }}
                                </div>
                            </div>
                        </div>
                        {% endfor %}

                    </div>
                    <div class="messenger_right_bottom">
                        <form action="/chat/{{ current_ticket.uuid }}/send?messagesCount=50&amp;roomsCount=20&amp;q=" class="messenge_right_form" enctype="multipart/form-data" method="post">
                            {% csrf_token %}
                            <textarea name="message" placeholder="Напишите сообщение" maxlength="3000"></textarea>
                            <div class="right_form_btn">
                                <div class="call_moderator">
                                    <input type="file" name="attachments" accept=".png,.jpg, .jpeg" id="post_attachments" style="display: none" multiple="">
                                    <label for="post_attachments">
                                        <svg width="26" height="26" viewBox="0 0 26 26" fill="none" xmlns="http://www.w3.org/2000/svg">
                                            <path d="M22.2202 5.6875H18.7314L18.3251 4.46875C18.1293 3.87698 17.7518 3.36207 17.2463 2.99736C16.7408 2.63265 16.1331 2.43673 15.5098 2.4375H10.4902C9.86703 2.43703 9.25959 2.63307 8.75429 2.99776C8.24899 3.36244 7.87156 3.87718 7.67569 4.46875L7.26863 5.6875H3.77975C2.99305 5.68836 2.23882 6.00126 1.68254 6.55754C1.12626 7.11382 0.81336 7.86805 0.8125 8.65475V20.5985C0.81422 21.3846 1.1275 22.138 1.68368 22.6936C2.23987 23.2492 2.99361 23.5616 3.77975 23.5625H22.2235C23.0096 23.5608 23.763 23.2475 24.3186 22.6913C24.8742 22.1351 25.1866 21.3814 25.1875 20.5953V8.6515C25.1858 7.86537 24.8725 7.11197 24.3163 6.55639C23.7601 6.00081 23.0064 5.68836 22.2202 5.6875ZM23.5625 20.5953C23.5621 20.9511 23.4205 21.2923 23.1689 21.5439C22.9173 21.7955 22.5761 21.9371 22.2202 21.9375H3.77975C3.4239 21.9371 3.08274 21.7955 2.83111 21.5439C2.57948 21.2923 2.43793 20.9511 2.4375 20.5953V8.6515C2.43879 8.29621 2.58072 7.95589 2.83226 7.70496C3.08379 7.45404 3.42446 7.31293 3.77975 7.3125H7.85444C8.02489 7.31237 8.19099 7.25864 8.32923 7.1589C8.46746 7.05916 8.57082 6.91848 8.62469 6.75675L9.217 4.97982C9.30594 4.71254 9.47681 4.48008 9.70536 4.31541C9.9339 4.15075 10.2085 4.06226 10.4902 4.0625H15.5098C15.7916 4.06219 16.0664 4.15076 16.2949 4.31559C16.5235 4.48042 16.6943 4.71314 16.783 4.98063L17.3753 6.75675C17.4292 6.91848 17.5325 7.05916 17.6708 7.1589C17.809 7.25864 17.9751 7.31237 18.1456 7.3125H22.2202C22.5761 7.31293 22.9173 7.45449 23.1689 7.70611C23.4205 7.95774 23.5621 8.2989 23.5625 8.65475V20.5953Z" fill="black"></path>
                                            <path d="M13 8.125C11.7948 8.125 10.6166 8.48239 9.6145 9.15198C8.61238 9.82157 7.83133 10.7733 7.37011 11.8868C6.90889 13.0003 6.78821 14.2255 7.02334 15.4076C7.25847 16.5897 7.83884 17.6755 8.69107 18.5277C9.5433 19.3799 10.6291 19.9603 11.8112 20.1954C12.9932 20.4305 14.2185 20.3099 15.332 19.8486C16.4455 19.3874 17.3972 18.6064 18.0668 17.6043C18.7364 16.6021 19.0938 15.424 19.0938 14.2188C19.092 12.6031 18.4495 11.0541 17.307 9.91172C16.1646 8.76929 14.6156 8.12672 13 8.125ZM13 18.6875C12.1162 18.6875 11.2522 18.4254 10.5173 17.9344C9.78242 17.4433 9.20965 16.7454 8.87142 15.9289C8.53319 15.1123 8.44469 14.2138 8.61712 13.3469C8.78955 12.4801 9.21515 11.6838 9.84012 11.0589C10.4651 10.4339 11.2613 10.0083 12.1282 9.83587C12.995 9.66344 13.8936 9.75193 14.7101 10.0902C15.5267 10.4284 16.2246 11.0012 16.7156 11.736C17.2067 12.4709 17.4688 13.3349 17.4688 14.2188C17.4675 15.4035 16.9962 16.5394 16.1585 17.3772C15.3207 18.215 14.1848 18.6862 13 18.6875Z" fill="black"></path>
                                            <path d="M21.125 10.5625C21.5737 10.5625 21.9375 10.1987 21.9375 9.75C21.9375 9.30127 21.5737 8.9375 21.125 8.9375C20.6763 8.9375 20.3125 9.30127 20.3125 9.75C20.3125 10.1987 20.6763 10.5625 21.125 10.5625Z" fill="black"></path>
                                        </svg>
                                    </label>

                                </div>
                                <button type="submit">Отправить</button>
                            </div>
                        </form>
                    </div>
                </div>
            </div>
        </div>
    </div>
</div>
{% endblock %}